# ThetaMind Environment Configuration
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control

# ============================================
# Database Configuration
# ============================================
DATABASE_URL=postgresql+asyncpg://thetamind:password@localhost:5432/thetamind
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# ============================================
# Redis Configuration
# ============================================
REDIS_URL=redis://localhost:6379/0

# ============================================
# Tiger Brokers API Configuration
# ============================================
TIGER_API_KEY=
TIGER_API_SECRET=
TIGER_PRIVATE_KEY=
TIGER_ID=
TIGER_ACCOUNT=
TIGER_SANDBOX=true
TIGER_PROPS_PATH=

# Tiger 期权链：开发/生产会抢占接口。开发环境用测试数据，生产打开线上
# Development: false = 不调 Tiger 期权接口，从 option_chain_fixture.json 加载测试数据
# Production: true = 调用 Tiger 线上接口
TIGER_USE_LIVE_API=true
# 测试数据路径（空则用 app/data/fixtures/option_chain_fixture.json）。用 scripts/save_option_chain_fixture.py 生成
TIGER_OPTION_CHAIN_FIXTURE_PATH=

# ============================================
# Financial Modeling Prep API Configuration
# ============================================
# Required for MarketDataService (FinanceToolkit integration)
# Get your free API key at: https://site.financialmodelingprep.com/developer/docs/
# Free tier: 250 calls/day, 5 years of data, US exchanges only
FINANCIAL_MODELING_PREP_KEY=

# ============================================
# Google OAuth Configuration
# ============================================
GOOGLE_CLIENT_ID=your_google_client_id_here
GOOGLE_CLIENT_SECRET=your_google_client_secret_here

# ============================================
# Google API Key (for Gemini / Vertex AI)
# ============================================
# AIza... = Generative Language API | AQ.... = Vertex AI API key
# Get Vertex AI key: https://console.cloud.google.com/expressmode
# Required for all AI features (multi-agent, deep research, daily picks)
GOOGLE_API_KEY=

# Google Vertex AI Key (Fallback key starting with AQ...)
# Optional fallback key. If both GOOGLE_API_KEY (AIza) and GOOGLE_VERTEX_API_KEY (AQ) are provided, 
# Vertex AI will be used as a fallback when Generative Language API quota is exhausted.
GOOGLE_VERTEX_API_KEY=

# ============================================
# Google Cloud Configuration (for Vertex AI)
# ============================================
# Required when using Vertex AI key (AQ....). Use "global" for Gemini 3 Pro.
GOOGLE_CLOUD_PROJECT=
GOOGLE_CLOUD_LOCATION=global

# ============================================
# Lemon Squeezy Payment Configuration
# ============================================
LEMON_SQUEEZY_API_KEY=
LEMON_SQUEEZY_WEBHOOK_SECRET=
LEMON_SQUEEZY_STORE_ID=
LEMON_SQUEEZY_VARIANT_ID=          # Monthly subscription variant ID
LEMON_SQUEEZY_VARIANT_ID_YEARLY=   # Yearly subscription variant ID
LEMON_SQUEEZY_FRONTEND_URL=  # Frontend URL for payment success redirect
SUBSCRIPTION_PRICE_MONTHLY=9.9  # Monthly subscription price in USD
SUBSCRIPTION_PRICE_YEARLY=99.0  # Yearly subscription price in USD

# ============================================
# JWT Authentication
# ============================================
JWT_SECRET_KEY=your_jwt_secret_key_here_change_in_production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# ============================================
# Application Environment
# ============================================
ENVIRONMENT=development
DEBUG=false

# ============================================
# AI Provider Configuration (default: Gemini; ZenMux disabled)
# ============================================
AI_PROVIDER=gemini
AI_MODEL_TIMEOUT=600
# Recommended: gemini-3.1-pro-preview (Gemini 3 Pro Preview discontinued 2026-03-09)
AI_MODEL_DEFAULT=gemini-3.1-pro-preview
AI_MODEL_FALLBACK=gemini-3-flash-preview

# ============================================
# AI Image Generation Configuration
# ============================================
AI_IMAGE_MODEL=gemini-3-pro-image
# gemini (default) | zenmux — strategy chart images
AI_IMAGE_PROVIDER=gemini

# ============================================
# ZenMux Configuration (Disabled by default)
# ============================================
# ZENMUX_API_KEY=
# ZENMUX_MODEL=
# ZENMUX_API_BASE=
# ZENMUX_VERTEX_AI_BASE=
# Report/image model lists: configurable in Admin Settings (DB keys ai_report_models_json, ai_image_models_json). No .env or restart needed.

# ============================================
# Cloudflare R2 Storage Configuration
# ============================================
# Optional: If not configured, images will be stored in database (base64)
# Get these values from Cloudflare Dashboard -> R2 -> Manage R2 API Tokens
CLOUDFLARE_R2_ACCOUNT_ID=                    # Your Cloudflare Account ID
CLOUDFLARE_R2_ACCESS_KEY_ID=                 # R2 API Token Access Key ID
CLOUDFLARE_R2_SECRET_ACCESS_KEY=              # R2 API Token Secret Access Key
CLOUDFLARE_R2_BUCKET_NAME=thetamind-images   # Your R2 bucket name
CLOUDFLARE_R2_PUBLIC_URL_BASE=               # Public URL (e.g., https://pub-xxx.r2.dev or custom domain)

# ============================================
# Frontend Domain Configuration
# ============================================
# For CORS and OAuth redirects
DOMAIN=
ALLOWED_ORIGINS=

# ============================================
# Scheduler Configuration
# ============================================
# Set to true so Daily Picks (08:30 EST) and Anomaly Radar (every 5 min) jobs run
ENABLE_SCHEDULER=false

# Feature flags: can be set here or in Admin Settings (DB). API/scheduler use DB first, then env.
# 异动雷达: scheduler scan + API + frontend display
ENABLE_ANOMALY_RADAR=false
# 每日精选: scheduler job + API + frontend display; cold start on startup when enabled
ENABLE_DAILY_PICKS=false

# ============================================
# Timezone
# ============================================
TIMEZONE=UTC
